<div class="infinite-cards row">
  <div class="col-md-12">
    <nb-card [nbSpinner]="campanhasPerfil.length == 0 && dadosCampanhaMetasLoadCampanhas" nbSpinnerStatus="warning">
      <nb-card-body *ngIf="campanhasPerfil.length == 0 && !dadosCampanhaMetasLoadCampanhas">Não existem campanhas
        associadas
      </nb-card-body>
    </nb-card>
    <nb-card [nbSpinner]="dadosCampanhaMetasLoad" nbSpinnerStatus="success">
      <nb-card-header>
        Dashboard de Campanhas
        <button nbButton ghost size="small" [nbPopover]="list" nbPopoverPlacement="bottom">
          <nb-icon status="info" class="toggle-icon" icon="hard-drive-outline" pack="eva"
            nbTooltip="Listagem de Campanhas">
          </nb-icon>
        </button>
        <div class="popover-container">
          <ng-template #list>
            <nb-card class="margin-bottom-0">
              <nb-card-header>Campanhas</nb-card-header>
              <nb-list class="maxContent">
                <nb-list-item class="txtList" *ngFor="let i of campanhasPerfil" (click)="atualizarFiltro(i)">
                  <div class="containerList">
                    <span nbTooltip="Nome da Campanha"> {{i.nome_campanha}} </span>
                    <span nbTooltip="Código da Campanha"> - [{{i.codigo_campanha}}] <br> </span>
                    <span nbTooltip="Data Inicial da Campanha"> De
                      {{i.data_inicio_campanha | moment: 'DD/MM/YYYY'}}</span>
                    <span nbTooltip="Data Final da Campanha"> Até
                      {{i.data_fim_campanha | moment: 'DD/MM/YYYY'}}</span>
                  </div>
                </nb-list-item>
              </nb-list>
            </nb-card>
          </ng-template>
        </div>
        <!--<nb-icon status="info" *ngIf="revealed.campanhas" class="toggle-icon" icon="chevron-up-outline" pack="eva"
          (click)="toggleView('campanhas')"></nb-icon>-->
      </nb-card-header>
      <nb-card-body *ngIf="dadosCampanhaMetas.length == 0 && dadosCampanhaMetasLoadCampanhas">
        <p>Sem dados para exibir</p>
      </nb-card-body>
      <nb-card-body *ngIf="dadosCampanhaMetas.length > 0 && dadosCampanhaMetasLoadCampanhas">
        <!--</nb-card-header>-->
        <div class="row">
          <div *ngIf="ativaBotaoLojaTableSmart">
            <button nbButton shape="round" size="small" status="info" nbTooltip="Limpar Filtros aplicados"
              (click)="clickSmartTableLimpar(2)">
              LOJAS: {{nomeLojaSelecionada}} &times;
            </button>
          </div>
          <div *ngIf="ativaBotaoPromotoresTableSmart">
            <button nbButton shape="round" size="small" status="info" nbTooltip="Limpar Filtros aplicados"
              (click)="clickSmartTableLimpar(1)">
              CONSULTORES: {{nomePromotorSelecionado}} &times;
            </button>
          </div>
          <div *ngIf="ativaBotaoRegionaisTableSmart">
            <button nbButton shape="round" size="small" status="info" nbTooltip="Limpar Filtros aplicados"
              (click)="clickSmartTableLimpar(4)">
              REGIONAIS: {{nomeRegionalSelecionado}} &times;
            </button>
          </div>
        </div><br>
        <div class="col-md-12 col-sm-12 col-lg-12 row justify-content-between">
          <nb-card accent="info" class="cardTrd">
            <nb-card-body class="cardBody">
              <div class="container">
                <table class="table3">
                  <tr>
                    <td class="txtTable3" style="width: 16.66%;">INÍCIO</td>
                    <div class="vl"></div>
                    <td class="txtTable3" style="width: 16.66%;">FIM</td>
                    <div class="vl"></div>
                    <td class="txtTable3" style="width: 16.66%;">DIAS ÚTEIS DO PERÍODO</td>
                    <div class="vl"></div>
                    <td class="txtTable3" style="width: 16.66%;">DIAS ÚTEIS RESTANTES</td>
                    <div class="vl"></div>
                    <td class="txtTable3" style="width: 16.66%;">TICKET MÉDIO</td>
                    <div class="vl"></div>
                    <td class="txtTable3" style="width: 16.66%;">HC</td>
                  </tr>
                  <tr>
                    <td style="width: 16.66%;">
                      <h6>{{campanhaSelecionada?.data_inicio_campanha | moment: 'DD/MM/YYYY'}}
                      </h6>
                    </td>
                    <div class="vl"></div>
                    <td style="width: 16.66%;">
                      <h6>{{campanhaSelecionada?.data_fim_campanha | moment: 'DD/MM/YYYY'}}</h6>
                    </td>
                    <div class="vl"></div>
                    <td style="width: 16.66%;">
                      <h6>{{campanhaDias}}</h6>
                    </td>
                    <div class="vl"></div>
                    <td style="width: 16.66%;">
                      <h6>{{campanhaPendencias}}</h6>
                    </td>
                    <div class="vl"></div>
                    <td style="width: 16.66%;">
                      <h6>{{dadosProdutoCorbanCampanha.ticket_medio_campanha}}</h6>
                    </td>
                    <div class="vl"></div>
                    <td style="width: 16.66%;">
                      <h6>{{dadosProdutoCorbanCampanha.total_hc_participantes}}</h6>
                    </td>
                  </tr>
                </table>

              </div>
            </nb-card-body>
          </nb-card>
        </div>

        <div class="col-md-12 col-lg-12 col-lg-12 row justify-content-between">
          <!----------------------CARD 01 --------------------->
          <nb-card *ngIf="dadosCampanhaMetas.length != 0" accent="success" class="cardFirst">
            <nb-card-header>
              <span class="txtTable2">{{nomeCampanhaSelecionado}}</span><br>
              <span class="txtTable3">Período: {{periodoCampanhaSelecionado}}</span>
            </nb-card-header>
            <nb-card-body class="cardBody">
              <table class="tabelaCircle">
                <tr>
                  <td rowspan="4">
                    <span
                      nbTooltip="Valor de porcentagem: {{((dadosCampanhaMetas[0].atingimento_total_campanha/dadosCampanhaMetas[0].meta_total_campanha)*100).toFixed(2)}} %">
                      <round-progress
                        current="{{((dadosCampanhaMetas[0].atingimento_total_campanha/dadosCampanhaMetas[0].meta_total_campanha)*100).toFixed(2)}}"
                        [animation]="'easeInOutQuart'" [max]="100.00" background="gray" [clockwise]="true"
                        [semicircle]="false" color="#00d68f" [radius]="40" [stroke]="10" [rounded]="false">
                      </round-progress>
                      <!--<nb-progress-bar size="tiny" status="info"
                        value="{{((dadosCampanhaMetas[0].atingimento_total_campanha/dadosCampanhaMetas[0].meta_total_campanha)*100).toFixed(2)}}"
                        [displayValue]="true">
                        </nb-progress-bar>-->
                    </span>
                  </td>
                  <td class="txtTableCircle">
                    <div class="simple">Meta Total: </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="valuesCard1">
                      {{dadosCampanhaMetas[0].meta_total_campanha | number:'.':'pt'}}</div>
                  </td>
                </tr>
                <tr>
                  <td class="txtTableCircle">
                    <div class="simple">Realizado: </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="valuesCard1">
                      {{dadosCampanhaMetas[0].atingimento_total_campanha | number:'.':'pt'}}</div>
                  </td>
                </tr>
              </table>
              <div class="porcentagem">
                {{((dadosCampanhaMetas[0].atingimento_total_campanha/dadosCampanhaMetas[0].meta_total_campanha)*100).toFixed(2)}}%
              </div><br><br>

              <div class="row">
                <div class="col">
                  <div class="simpleCard1">Meta Diária: </div>
                  <div class="valuesCard1Bottom">
                    {{ dadosCampanhaMetas[0].meta_diaria_campanha | number:'.':'pt' }}</div>
                </div>
                <div class="col">
                  <div class="simpleCard1">Meta Diária Recalculada: </div>
                  <div class="valuesCard1Bottom">
                    {{ ((dadosCampanhaMetas[0].meta_total_campanha - dadosCampanhaMetas[0].atingimento_total_campanha) / this.campanhaPendencias).toFixed(0) | number:'.':'pt' }}
                  </div>
                </div>
              </div>
              <div *ngIf="dadosCampanhaMetas[0].nivel_atingimento_campanha != null" class="row">
                <div class="col">
                  <div class="simpleCard1">Nível Campanha: </div>
                  <div class="valuesCard1Bottom">
                    {{ dadosCampanhaMetas[0].nivel_atingimento_campanha }}</div>
                </div>
              </div>
            </nb-card-body>
          </nb-card>

          <!----------------------CARD 02 --------------------->
          <nb-card *ngIf="datasOntem.length != 0" accent="primary" class="cardFirst">
            <nb-card-header>
              <div class="container">
                <table class="tabela">
                  <tr>
                    <td rowspan="2" class="dia-setado">{{ datasOntem[0].dia }}</td>
                    <td class="mes-setado">{{ mes[datasOntem[0].mes-1].label | uppercase}}</td>
                  </tr>
                  <tr>
                    <td class="ano-setado">{{ datasOntem[0].ano}}</td>
                  </tr>
                </table>
              </div>
            </nb-card-header>
            <!--<div class="info"></div>-->
            <nb-card-body class="cardBody">
              <br>
              <table class="tabelaCircle">
                <tr>
                  <td rowspan="4">
                    <span
                      nbTooltip="Valor de porcentagem: {{((datasOntem[1].total_valor_elegivel.toFixed(2)/datasOntem[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}} %">
                      <round-progress
                        current="{{((datasOntem[1].total_valor_elegivel.toFixed(2)/datasOntem[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}}"
                        [animation]="'easeInOutQuart'" [max]="100.00" background="gray" [clockwise]="true"
                        [semicircle]="false" color="#3366ff" [radius]="40" [stroke]="10" [rounded]="false">
                      </round-progress>
                    </span>
                  </td>
                  <td class="txtTableCircle">
                    <div class="simple">Digitado: </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="values">{{datasOntem[0].total_valor_elegivel | number:'.':'pt'}}
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="txtTableCircle">
                    <div class="simple">Pago: </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="values">{{datasOntem[1].total_valor_elegivel | number:'.':'pt'}}
                    </div>
                  </td>
                </tr>
              </table>
              <div class="porcentagem">
                {{((datasOntem[1].total_valor_elegivel.toFixed(2)/datasOntem[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}}%
              </div><br>
              <!--<div><br>
              <div class="simple">Digitado: </div>
              <div class="values">{{datasOntem[0].total_valor_elegivel | number:'.':'pt'}}
              </div>
              <div class="simple">Pago: </div>
              <div class="values">{{datasOntem[1].total_valor_elegivel | number:'.':'pt'}}</div>
            </div><br><br>
            <span
              nbTooltip="Valor de porcentagem: {{((datasOntem[1].total_valor_elegivel.toFixed(2)/datasOntem[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}} %">
              <nb-progress-bar size="tiny" status="info"
                value="{{((datasOntem[1].total_valor_elegivel.toFixed(2)/datasOntem[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}}"
                [displayValue]="true"></nb-progress-bar>
            </span>-->
            </nb-card-body>
          </nb-card>

          <!----------------------CARD 03 --------------------->
          <nb-card *ngIf="datasHoje.length != 0" accent="primary" class="cardFirst">
            <nb-card-header>
              <div class="container">
                <table class="tabela">
                  <tr>
                    <td rowspan="2" class="dia-setado">{{datasHoje[0].dia}}</td>
                    <td class="mes-setado">{{ mes[datasHoje[0].mes-1].label | uppercase }}</td>
                  </tr>
                  <tr>
                    <td class="ano-setado">{{ datasHoje[0].ano }}</td>
                  </tr>
                </table>
              </div>
            </nb-card-header>
            <nb-card-body class="cardBody">
              <br>
              <!--<div class="info"></div>-->
              <table class="tabelaCircle">
                <tr>
                  <td rowspan="4">
                    <span
                      nbTooltip="Valor de porcentagem: {{((datasHoje[1].total_valor_elegivel.toFixed(2)/datasHoje[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}} %">
                      <round-progress
                        current="{{((datasHoje[1].total_valor_elegivel.toFixed(2)/datasHoje[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}}"
                        [animation]="'easeInOutQuart'" [max]="100.00" background="gray" [clockwise]="true"
                        [semicircle]="false" color="#3366ff" [radius]="40" [stroke]="10" [rounded]="false">
                      </round-progress>
                    </span>
                  </td>
                  <td class="txtTableCircle">
                    <div class="simple">Digitado: </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="values">{{datasHoje[0].total_valor_elegivel | number:'.':'pt'}}
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="txtTableCircle">
                    <div class="simple">Pago: </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="values">{{datasHoje[1].total_valor_elegivel | number:'.':'pt'}}
                    </div>
                  </td>
                </tr>
              </table>
              <div class="porcentagem">
                {{((datasHoje[1].total_valor_elegivel.toFixed(2)/datasHoje[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}}%
              </div><br>
              <!--<div><br>
              <div class="simple">Digitado: </div>
              <div class="values">{{datasHoje[0].total_valor_elegivel | number:'.':'pt'}}</div>
              <div class="simple">Pago: </div>
              <div class="values">{{datasHoje[1].total_valor_elegivel | number:'.':'pt'}}</div>
            </div><br><br>
            <span
              nbTooltip="Valor de porcentagem: {{((datasHoje[1].total_valor_elegivel.toFixed(2)/datasHoje[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}}%">
              <nb-progress-bar size="tiny" status="info"
                value="{{((datasHoje[1].total_valor_elegivel.toFixed(2)/datasHoje[0].total_valor_elegivel.toFixed(2))*100).toFixed(2)}}"
                [displayValue]="true"></nb-progress-bar>
            </span>-->
            </nb-card-body>
          </nb-card>

          <!----------------------CARD 04 --------------------->
          <nb-card *ngIf="contratosPagosSinteticos.length != 0" accent="warning" class="cardFirst">
            <nb-card-header>
              <div class="container">
                <table class="tabela2">
                  <tr>
                    <td *ngIf="mes[contratosPagosSinteticos.mes_campanha_inicial-1].mesExtenso != null"
                      class="mes-setado2">
                      {{ mes[contratosPagosSinteticos.mes_campanha_inicial-1].mesExtenso | uppercase }}
                      <span></span></td>
                  </tr>
                  <tr>
                    <td class="ano-setado2">{{ contratosPagosSinteticos.ano_campanha_inicial }}</td>
                  </tr>
                </table>
              </div>
            </nb-card-header>
            <nb-card-body class="cardBody">
              <br>
              <table class="tabelaCircle">
                <tr>
                  <td rowspan="4">
                    <span
                      nbTooltip="Valor de porcentagem: {{contratosPagosSinteticos.relacao_valor_digitado_pago.toFixed(2)}} %">
                      <round-progress current="{{contratosPagosSinteticos.relacao_valor_digitado_pago.toFixed(2)}}"
                        [animation]="'easeInOutQuart'" [max]="100.00" background="gray" [clockwise]="true"
                        [semicircle]="false" color="#fa0" [radius]="40" [stroke]="10" [rounded]="false">
                      </round-progress>
                    </span>
                  </td>
                  <td class="txtTableCircle">
                    <div class="simple">Digitado: </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="values">
                      {{contratosPagosSinteticos.valor_elegivel_total_digitado | number:'.':'pt'}}
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="txtTableCircle">
                    <div class="simple">Pago: </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="values">
                      {{contratosPagosSinteticos.valor_elegivel_total_pago | number:'.':'pt'}}
                    </div>
                  </td>
                </tr>
              </table>
              <div class="porcentagem">
                {{contratosPagosSinteticos.relacao_valor_digitado_pago.toFixed(2)}}%
              </div><br>
            </nb-card-body>
          </nb-card>
        </div>

        <!--CARDS ROSA-->
        <div class="col-md-12 col-sm-12 col-lg-12 row justify-content-between">
          <div *ngFor="let i of dadosProdutoCorbanCampanha.produto_corban_campanha">
            <nb-card *ngIf="i.length != 0" accent="danger" class="cardSnd">
              <nb-card-header>
                <div class="produtoCorban">{{i.nome_produto_corban}}</div>
              </nb-card-header>
              <nb-card-body class="cardBody2">
                <table class="tabelaCircle">
                  <tr>
                    <td rowspan="5">
                      <span nbTooltip="Valor de porcentagem: {{i.percentual_atingido_produto_corban}}%">
                        <round-progress current="{{i.percentual_atingido_produto_corban}}"
                          [animation]="'easeInOutQuart'" [max]="100.00" background="gray" [clockwise]="true"
                          [semicircle]="false" color="#ff3d71" [radius]="40" [stroke]="10" [rounded]="false">
                        </round-progress>
                      </span>
                    </td>
                    <td class="txtTableCircle">Meta</td>
                  </tr>
                  <tr>
                    <td class="numCards"> {{i.meta_producao_produto_corban | number}} </td>
                  </tr>
                  <tr>
                    <td class="txtTableCircle">Realizado</td>
                  </tr>
                  <tr>
                    <td class="numCards">
                      {{i.valor_atingido_meta_producao_produto_corban | number}}<br>
                      <span class="txtTableCircle">Nível</span><br>
                      <span class="numCards"
                        *ngIf="i.nivel_atingimento_produto_corban != null">{{i.nivel_atingimento_produto_corban}}</span>
                      <span class="numCards" *ngIf="i.nivel_atingimento_produto_corban == null">-</span>
                    </td>
                  </tr>
                </table>
                <div class="porcentagemCard">
                  {{i.percentual_atingido_produto_corban.toFixed(2) || 0}}%
                </div>
              </nb-card-body>
            </nb-card>
          </div>
        </div>

        <!--TABELA-->
        <nb-tabset [nbSpinner]="dadosCampanhaMetasSmartTable.length == 0 && dadosCampanhaMetasLoad"
          nbSpinnerStatus="info" class="size-fonte" fullWidth (changeTab)="filtraCampanhaPerfilSmartTable($event)">
          <nb-tab [tabTitle]="'LOJAS'" [active]="true" badgeStatus="info">
            <div class="container">
              <nb-card>
                <nb-card-body>

                  <!--<ng2-smart-table [settings]="settingsLojas" [source]="source"
                    (userRowSelect)="clickSmartTableLojas($event)">
                  </ng2-smart-table>-->

                  <table class="tabela" equalColumnsWidth>
                    <thead>
                      <tr>
                        <th (click)="sort('nome')" class="size-fonte-left">Lojas
                          <span *ngIf="key =='nome'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('meta_total_campanha')" class="size-fonte-right">Meta Total
                          <span *ngIf="key =='meta_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('atingimento_total_campanha')" class="size-fonte-right">Atingido
                          <span *ngIf="key =='atingimento_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('perc_atingimento_total_campanha')" class="size-fonte-right">% Atingido
                          <span *ngIf="key =='perc_atingimento_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('ticket_medio_campanha')" class="size-fonte-right">Ticket Médio
                          <span *ngIf="key =='ticket_medio_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('meta_diaria_campanha')" class="size-fonte-right">Meta Diária
                          <span *ngIf="key =='meta_diaria_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('meta_recalculada')" class="size-fonte-right">Meta Recalculada
                          <span *ngIf="key =='meta_recalculada'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('projecao_total_campanha')" class="size-fonte-right">Total campanha projetado
                          <span *ngIf="key =='projecao_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('total_hc_participantes')" class="size-fonte-right">HC
                          <span *ngIf="key =='total_hc_participantes'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                      </tr>
                    </thead>
                    <tbody *ngIf="dadosCampanhaMetasSmartTable.length != 0" style="height: 600px; overflow-y: scroll">
                      <tr *ngFor="let i of dadosCampanhaMetasSmartTable | orderBy:key:reverse;"
                        (click)="clickSmartTableLojas(i)">
                        <td class="size-fonte-left-body">{{i.nome_agrupamento}}</td>
                        <td class="size-fonte-right-body">{{i.meta_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.atingimento_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.perc_atingimento_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.ticket_medio_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.meta_diaria_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.meta_recalculada}}</td>
                        <td class="size-fonte-right-body">{{i.projecao_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.total_hc_participantes}}</td>
                      </tr>
                    </tbody>
                  </table><br>
                  <!--<div>{{ { prop: { list: [5, 3, 1001, 104785,  4, 1, 2] } } | orderBy: 'prop.list' | json }}</div>-->
                </nb-card-body>
              </nb-card>
            </div>
          </nb-tab>

          <nb-tab [tabTitle]="'REGIONAIS'" [active]="true" badgeStatus="info">
            <div class="container">
              <nb-card>
                <nb-card-body>

                  <!--<ng2-smart-table [settings]="settingsLojas" [source]="source"
                    (userRowSelect)="clickSmartTableLojas($event)">
                  </ng2-smart-table>-->

                  <table class="tabela" equalColumnsWidth>
                    <thead>
                      <tr>
                        <th (click)="sort('nome')" class="size-fonte-left">Regionais
                          <span *ngIf="key =='nome'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('meta_total_campanha')" class="size-fonte-right">Meta Total
                          <span *ngIf="key =='meta_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('atingimento_total_campanha')" class="size-fonte-right">Atingido
                          <span *ngIf="key =='atingimento_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('perc_atingimento_total_campanha')" class="size-fonte-right">% Atingido
                          <span *ngIf="key =='perc_atingimento_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('ticket_medio_campanha')" class="size-fonte-right">Ticket Médio
                          <span *ngIf="key =='ticket_medio_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('meta_diaria_campanha')" class="size-fonte-right">Meta Diária
                          <span *ngIf="key =='meta_diaria_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('meta_recalculada')" class="size-fonte-right">Meta Recalculada
                          <span *ngIf="key =='meta_recalculada'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('projecao_total_campanha')" class="size-fonte-right">Total campanha projetado
                          <span *ngIf="key =='projecao_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('total_hc_participantes')" class="size-fonte-right">HC
                          <span *ngIf="key =='total_hc_participantes'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                      </tr>
                    </thead>
                    <tbody *ngIf="dadosCampanhaMetasSmartTable.length != 0" style="height: 600px; overflow-y: scroll">
                      <tr *ngFor="let i of dadosCampanhaMetasSmartTable | orderBy:key:reverse;"
                        (click)="clickSmartTableRegionais(i)">
                        <td class="size-fonte-left-body">{{i.nome_agrupamento}}</td>
                        <td class="size-fonte-right-body">{{i.meta_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.atingimento_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.perc_atingimento_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.ticket_medio_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.meta_diaria_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.meta_recalculada}}</td>
                        <td class="size-fonte-right-body">{{i.projecao_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.total_hc_participantes}}</td>
                      </tr>
                    </tbody>
                  </table>
                </nb-card-body>
              </nb-card>
            </div>
          </nb-tab>

          <nb-tab [tabTitle]="'CONSULTORES'" [active]="false" badgeStatus="warning">
            <div class="container">
              <nb-card>
                <nb-card-body>

                  <!--<ng2-smart-table [settings]="settingsPromotores" [source]="source"
                    (userRowSelect)="clickSmartTablePromotores($event)">
                  </ng2-smart-table>-->

                  <table class="tabela" equalColumnsWidth>
                    <thead>
                      <tr>
                        <th (click)="sort('nome')" class="size-fonte-left">Consultores
                          <span *ngIf="key =='nome'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('meta_total_campanha')" class="size-fonte-right">Meta Total
                          <span *ngIf="key =='meta_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('atingimento_total_campanha')" class="size-fonte-right">Atingido
                          <span *ngIf="key =='atingimento_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('perc_atingimento_total_campanha')" class="size-fonte-right">% Atingido
                          <span *ngIf="key =='perc_atingimento_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('ticket_medio_campanha')" class="size-fonte-right">Ticket Médio
                          <span *ngIf="key =='ticket_medio_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('meta_diaria_campanha')" class="size-fonte-right">Meta Diária
                          <span *ngIf="key =='meta_diaria_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('meta_recalculada')" class="size-fonte-right">Meta Recalculada
                          <span *ngIf="key =='meta_recalculada'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('projecao_total_campanha')" class="size-fonte-right">Total campanha projetado
                          <span *ngIf="key =='projecao_total_campanha'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                        <th (click)="sort('total_hc_participantes')" class="size-fonte-right">HC
                          <span *ngIf="key =='total_hc_participantes'">{{reverse ? '▵' : '▿'}}</span>
                        </th>
                      </tr>
                    </thead>
                    <tbody *ngIf="dadosCampanhaMetasSmartTable.length != 0" style="height: 600px; overflow-y: scroll">
                      <tr *ngFor="let i of dadosCampanhaMetasSmartTable | orderBy:key:reverse;"
                        (click)="clickSmartTablePromotores(i)">
                        <td class="size-fonte-left-body">{{i.nome_agrupamento}}</td>
                        <td class="size-fonte-right-body">{{i.meta_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.atingimento_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.perc_atingimento_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.ticket_medio_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.meta_diaria_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.meta_recalculada}}</td>
                        <td class="size-fonte-right-body">{{i.projecao_total_campanha}}</td>
                        <td class="size-fonte-right-body">{{i.total_hc_participantes}}</td>
                      </tr>
                    </tbody>
                  </table>
                </nb-card-body>
              </nb-card>
            </div>
          </nb-tab>
        </nb-tabset><br>

        <!--GRAFICO-->
        <div class="col-md-12 col-lg-12 col-lg-12 row justify-content-between">
          <div class="cardGraph">
            <nb-card accent="info" class="cardGraph">
              <nb-card-header style="text-align: center;">Relação de Contratos Digitados X Pagos
                <nb-icon *ngIf="revealed.chart" class="toggle-icon" icon="chevron-up-outline" pack="eva"
                  (click)="toggleView('chart')"></nb-icon>
                <nb-icon *ngIf="!revealed.chart" class="toggle-icon" icon="chevron-down-outline" pack="eva"
                  (click)="toggleView('chart')"> </nb-icon>
              </nb-card-header>
              <nb-card-body *ngIf="revealed.chart">
                <div echarts [options]="chartOptions" class="echart"></div>
              </nb-card-body>
            </nb-card>
          </div>
        </div>
      </nb-card-body>
    </nb-card>
  </div>
</div>